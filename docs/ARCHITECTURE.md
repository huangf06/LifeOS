# LifeOS ç³»ç»Ÿæ¶æ„

## ğŸ—ï¸ æ•´ä½“æ¶æ„

```mermaid
graph TB
    subgraph "ç”¨æˆ·ç•Œé¢å±‚"
        A[OmniFocus 3] 
        B[Logseq]
        C[ç»ˆç«¯å‘½ä»¤]
    end
    
    subgraph "LifeOS æ ¸å¿ƒ"
        D[åŒæ­¥å¼•æ“]
        E[æ¨¡æ¿ç”Ÿæˆå™¨]  
        F[æ•°æ®å¤„ç†å™¨]
        G[è‡ªåŠ¨åŒ–è°ƒåº¦]
    end
    
    subgraph "æ•°æ®å±‚"
        H[ä»»åŠ¡æ•°æ®]
        I[æ—¥å¿—æ•°æ®]
        J[åŒæ­¥æ—¥å¿—]
    end
    
    A -->|AppleScript| D
    D -->|ç”Ÿæˆæ¨¡æ¿| E
    E -->|å†™å…¥æ–‡ä»¶| B
    B -->|çŠ¶æ€æå–| F
    F -->|æ›´æ–°ä»»åŠ¡| A
    D --> H
    E --> I  
    F --> J
    G -->|å®šæ—¶è§¦å‘| D
    C -->|æ‰‹åŠ¨è§¦å‘| D
```

## ğŸ”§ æ ¸å¿ƒç»„ä»¶

### 1. åŒæ­¥å¼•æ“ (Sync Engine)
è´Ÿè´£ OmniFocus â†” Logseq åŒå‘æ•°æ®åŒæ­¥

**èŒè´£ï¼š**
- ä» OmniFocus å¯¼å‡ºä»»åŠ¡æ•°æ®
- è§£æ Logseq ä¸­çš„çŠ¶æ€æ›´æ–°
- å¤„ç†æ•°æ®è½¬æ¢å’Œæ˜ å°„
- é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶

**å…³é”®æ–‡ä»¶ï¼š**
- `scripts/lifeos_sync.py` - æ ¸å¿ƒåŒæ­¥é€»è¾‘
- `scripts/omnifocus_export.scpt` - OmniFocusæ•°æ®å¯¼å‡º

### 2. æ¨¡æ¿ç”Ÿæˆå™¨ (Template Generator)  
åŸºäºä»»åŠ¡æ•°æ®ç”Ÿæˆæ™ºèƒ½çš„æ—¥å¿—æ¨¡æ¿

**åŠŸèƒ½ï¼š**
- ä»»åŠ¡åˆ†ç»„å’Œä¼˜å…ˆçº§æ’åº
- æ™ºèƒ½æ—¶é—´å—è§„åˆ’
- ä¸ªæ€§åŒ–æ¨¡æ¿å®šåˆ¶
- å…ƒæ•°æ®ä¿ç•™å’Œæ˜ å°„

### 3. æ•°æ®å¤„ç†å™¨ (Data Processor)
åˆ†æå’Œå¤„ç†æ—¥å¿—ä¸­çš„æ‰§è¡Œæ•°æ®

**åŠŸèƒ½ï¼š**
- çŠ¶æ€å˜æ›´è¯†åˆ«
- æ‰§è¡Œè®°å½•æå–
- è´¨é‡è¯„åˆ†è§£æ
- æ´å¯Ÿå†…å®¹æ•´ç†

### 4. è‡ªåŠ¨åŒ–è°ƒåº¦ (Automation Scheduler)
ç®¡ç†å®šæ—¶ä»»åŠ¡å’Œç³»ç»Ÿé›†æˆ

**åŠŸèƒ½ï¼š**
- LaunchAgent å®šæ—¶ä»»åŠ¡
- ç³»ç»Ÿé€šçŸ¥å‘é€
- é”™è¯¯æ—¥å¿—è®°å½•
- åº”ç”¨è‡ªåŠ¨å¯åŠ¨

## ğŸ“Š æ•°æ®æµè®¾è®¡

### æ™¨é—´åŒæ­¥æµç¨‹
```
OmniFocusä»»åŠ¡ â†’ AppleScriptå¯¼å‡º â†’ JSONæ•°æ® â†’ Pythonå¤„ç† â†’ 
æ¨¡æ¿ç”Ÿæˆ â†’ Logseqæ–‡ä»¶å†™å…¥ â†’ ç”¨æˆ·é€šçŸ¥ â†’ åº”ç”¨å¯åŠ¨
```

### æ™šé—´åŒæ­¥æµç¨‹
```
Logseqæ–‡ä»¶ â†’ å†…å®¹è§£æ â†’ çŠ¶æ€æå– â†’ æ•°æ®æ˜ å°„ â†’ 
AppleScriptæ›´æ–° â†’ OmniFocusçŠ¶æ€åŒæ­¥ â†’ å¤‡æ³¨æ›´æ–° â†’ æ—¥å¿—è®°å½•
```

## ğŸ”„ æ‰©å±•æ¶æ„

ç³»ç»Ÿè®¾è®¡æ”¯æŒæœªæ¥æ‰©å±•ï¼š

### é€‚é…å™¨æ¨¡å¼
```python
class BaseAdapter(ABC):
    @abstractmethod
    def export_tasks(self) -> List[Task]: pass
    
    @abstractmethod  
    def update_task_status(self, task_id: str, status: str): pass

class OmniFocusAdapter(BaseAdapter):
    # OmniFocus å…·ä½“å®ç°
    
class ThingsAdapter(BaseAdapter):
    # Things 3 å…·ä½“å®ç°
```

### æ’ä»¶ç³»ç»Ÿ
- å¥èº«æ•°æ®é›†æˆæ’ä»¶
- å­¦ä¹ è¿›åº¦è¿½è¸ªæ’ä»¶  
- è´¢åŠ¡æ•°æ®åŒæ­¥æ’ä»¶
- AIåˆ†æå’Œå»ºè®®æ’ä»¶