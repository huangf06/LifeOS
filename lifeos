#!/bin/bash
# LifeOS Personal Assistant å¿«é€Ÿå¯åŠ¨è„šæœ¬

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PYTHON_SCRIPT="$SCRIPT_DIR/scripts/personal_assistant.py"

# æ£€æŸ¥å‚æ•°
if [ $# -eq 0 ]; then
    echo "ğŸ¤– LifeOS Personal Assistant"
    echo ""
    echo "ç”¨æ³•:"
    echo "  lifeos 'your task description'"
    echo "  lifeos stats    # æŸ¥çœ‹ç»Ÿè®¡"
    echo ""
    echo "ç¤ºä¾‹:"
    echo "  lifeos 'æ˜å¤©è¦å¼€ä¼šï¼Œéœ€è¦å‡†å¤‡PPTå’Œä¼šè®®èµ„æ–™'"
    echo "  lifeos 'è¿™å‘¨è¦å®Œæˆé¡¹ç›®æŠ¥å‘Šï¼Œå®‰æ’æ—¶é—´å¤ä¹ è‹±è¯­'"
    exit 1
fi

# ç‰¹æ®Šå‘½ä»¤
case "$1" in
    "setup")
        python3 "$SCRIPT_DIR/scripts/email_sender.py" setup
        ;;
    "test-email")
        python3 "$SCRIPT_DIR/scripts/email_sender.py" test
        ;;
    "fitness")
        python3 "$SCRIPT_DIR/scripts/email_sender.py" fitness
        ;;
    "stats")
        python3 "$PYTHON_SCRIPT" --stats
        ;;
    # ç”Ÿæ´»è¿½è¸ªå‘½ä»¤
    "log")
        python3 "$SCRIPT_DIR/scripts/logseq_tracker.py" log --category "$2" --content "$3" --rating "$4" --duration "$5"
        ;;
    "data")
        python3 "$SCRIPT_DIR/scripts/logseq_tracker.py" data --type "$2" --value "$3"
        ;;
    "today")
        python3 "$SCRIPT_DIR/scripts/logseq_tracker.py" init
        ;;
    "report")
        python3 "$SCRIPT_DIR/scripts/logseq_tracker.py" report
        ;;
    "sync")
        python3 "$SCRIPT_DIR/scripts/logseq_tracker.py" sync
        ;;
    # AIé¡¾é—®å‘½ä»¤
    "analyze")
        python3 "$SCRIPT_DIR/scripts/ai_advisor.py" analyze
        ;;
    "plan")
        python3 "$SCRIPT_DIR/scripts/ai_advisor.py" plan
        ;;
    "advice")
        python3 "$SCRIPT_DIR/scripts/ai_advisor.py" analyze
        ;;
    # Obamaè¯­éŸ³è®­ç»ƒå‘½ä»¤
    "obama")
        shift
        if [ $# -eq 0 ]; then
            echo "ğŸ™ï¸ Obamaè¯­éŸ³è®­ç»ƒç³»ç»Ÿ"
            echo ""
            echo "ç”¨æ³•:"
            echo "  lifeos obama speak 'æ–‡æœ¬' [è¯­æ°”]  # ç”Ÿæˆè¯­éŸ³"
            echo "  lifeos obama practice file.txt    # ç»ƒä¹ ä¼šè¯"
            echo "  lifeos obama progress             # æŸ¥çœ‹è¿›åº¦"
            echo "  lifeos obama tones                # æŸ¥çœ‹è¯­æ°”æ¨¡å¼"
            echo "  lifeos obama setup                # è®¾ç½®å£°éŸ³å…‹éš†"
            echo ""
            echo "è¯­æ°”æ¨¡å¼: inspiring/conversational/serious/storytelling"
            exit 0
        fi
        case "$1" in
            "speak")
                python3 "$SCRIPT_DIR/scripts/obama_voice_trainer.py" generate --text "$2" --tone "${3:-conversational}"
                ;;
            "practice")
                python3 "$SCRIPT_DIR/scripts/obama_voice_trainer.py" practice --file "$2" --tone "${3:-conversational}"
                ;;
            "progress")
                python3 "$SCRIPT_DIR/scripts/obama_voice_trainer.py" progress
                ;;
            "tones")
                python3 "$SCRIPT_DIR/scripts/obama_voice_trainer.py" list-tones
                ;;
            "setup")
                python3 "$SCRIPT_DIR/scripts/voice_api.py" setup
                ;;
            *)
                echo "âŒ æœªçŸ¥å‘½ä»¤: $1"
                echo "ä½¿ç”¨ 'lifeos obama' æŸ¥çœ‹å¸®åŠ©"
                ;;
        esac
        ;;
    "help")
        echo "ğŸ¤– LifeOS Personal Assistant å¸®åŠ©"
        echo ""
        echo "åŸºç¡€å‘½ä»¤ï¼š"
        echo "  lifeos 'task description'  # æ™ºèƒ½ä»»åŠ¡è§„åˆ’"
        echo "  lifeos setup              # è®¾ç½®é‚®ä»¶è´¦æˆ·"
        echo "  lifeos test-email         # æµ‹è¯•é‚®ä»¶å‘é€"
        echo "  lifeos fitness            # å‘é€å¥èº«è®¡åˆ’"
        echo "  lifeos stats              # æŸ¥çœ‹ä½¿ç”¨ç»Ÿè®¡"
        echo ""
        echo "ç”Ÿæ´»è¿½è¸ªå‘½ä»¤ï¼š"
        echo "  lifeos today              # åˆå§‹åŒ–ä»Šæ—¥è®°å½•æ¨¡æ¿"
        echo "  lifeos log work 'ç¼–ç¨‹2å°æ—¶' 8 '2h'  # è®°å½•æ´»åŠ¨"
        echo "  lifeos data mood 8        # æ›´æ–°å¿ƒæƒ…è¯„åˆ†"
        echo "  lifeos report             # ç”Ÿæˆå‘¨æŠ¥"
        echo "  lifeos sync               # GitåŒæ­¥Logseq"
        echo ""
        echo "AIé¡¾é—®å‘½ä»¤ï¼š"
        echo "  lifeos analyze            # AIåˆ†æç”Ÿæ´»æ¨¡å¼å’Œå»ºè®®"
        echo "  lifeos plan               # ç”Ÿæˆæ˜æ—¥ä¼˜åŒ–è®¡åˆ’"
        echo "  lifeos advice             # è·å–AIç”Ÿæ´»å»ºè®®"
        echo ""
        echo "Obamaè¯­éŸ³è®­ç»ƒå‘½ä»¤ï¼š"
        echo "  lifeos obama              # æŸ¥çœ‹è¯­éŸ³è®­ç»ƒå¸®åŠ©"
        echo "  lifeos obama speak 'æ–‡æœ¬' # ç”Ÿæˆå¥¥å·´é©¬é£æ ¼è¯­éŸ³"
        echo "  lifeos obama practice     # å¼€å§‹ç»ƒä¹ ä¼šè¯"
        echo "  lifeos obama progress     # æŸ¥çœ‹è®­ç»ƒè¿›åº¦"
        echo ""
        echo "è¿™æ˜¯ä½ çš„AIä¸ªäººåŠ©ç†ï¼Œå¯ä»¥ï¼š"
        echo "â€¢ ç†è§£ä½ çš„è‡ªç„¶è¯­è¨€æè¿°"
        echo "â€¢ ç”Ÿæˆç»“æ„åŒ–çš„ä»»åŠ¡è®¡åˆ’" 
        echo "â€¢ è‡ªåŠ¨å‘é€ä»»åŠ¡åˆ°OmniFocus"
        echo "â€¢ è·Ÿè¸ªä»»åŠ¡å†å²å’Œç»Ÿè®¡"
        echo ""
        echo "ç¤ºä¾‹ï¼š"
        echo "  lifeos 'æ˜å¤©è¦å¼€ä¼šï¼Œéœ€è¦å‡†å¤‡PPTå’Œèµ„æ–™'"
        echo "  lifeos 'è¿™å‘¨å®Œæˆé¡¹ç›®æŠ¥å‘Šï¼Œå®‰æ’å­¦ä¹ æ—¶é—´'"
        ;;
    *)
        python3 "$PYTHON_SCRIPT" "$@"
        ;;
esac